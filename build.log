b'!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!\n'
b'!!                                                                                                                      !!\n'
b'!!  This software has not been tested with node v25.2.1.                                                                !!\n'
b'!!  Should you encounter odd runtime issues, please try using one of the supported release before filing a bug report.  !!\n'
b'!!                                                                                                                      !!\n'
b'!!  This software is currently running on node v25.2.1.                                                                 !!\n'
b'!!  As of the current release of this software, supported node releases are:                                            !!\n'
b'!!  - ^24.0.0 (Planned end-of-life: 2028-04-30)                                                                         !!\n'
b'!!  - ^22.0.0 (Planned end-of-life: 2027-04-30)                                                                         !!\n'
b'!!  - ^20.0.0 (Planned end-of-life: 2026-04-30)                                                                         !!\n'
b'!!                                                                                                                      !!\n'
b'!!  This warning can be silenced by setting the JSII_SILENCE_WARNING_UNTESTED_NODE_VERSION environment variable.        !!\n'
b'!!                                                                                                                      !!\n'
b'!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!\n'
[Warning at /LHCIStack/Service01/Service] minHealthyPercent has not been configured so the default value of 50% is used. The number of running tasks will decrease below the desired count during deployments etc. See https://github.com/aws/aws-cdk/issues/31705 [ack: @aws-cdk/aws-ecs:minHealthyPercent]
Resources:
  lhcivpc965AD59A:
    Type: AWS::EC2::VPC
    Properties:
      CidrBlock: 172.16.16.0/23
      EnableDnsHostnames: true
      EnableDnsSupport: true
      InstanceTenancy: default
      Tags:
        - Key: Name
          Value: LHCIStack/lhcivpc
    Metadata:
      aws:cdk:path: LHCIStack/lhcivpc/Resource
  lhcivpcPublicSubnet1SubnetCE46A6BB:
    Type: AWS::EC2::Subnet
    Properties:
      AvailabilityZone: us-east-1a
      CidrBlock: 172.16.16.0/26
      MapPublicIpOnLaunch: true
      Tags:
        - Key: aws-cdk:subnet-name
          Value: Public
        - Key: aws-cdk:subnet-type
          Value: Public
        - Key: Name
          Value: LHCIStack/lhcivpc/PublicSubnet1
      VpcId:
        Ref: lhcivpc965AD59A
    Metadata:
      aws:cdk:path: LHCIStack/lhcivpc/PublicSubnet1/Subnet
  lhcivpcPublicSubnet1RouteTable126FE11B:
    Type: AWS::EC2::RouteTable
    Properties:
      Tags:
        - Key: Name
          Value: LHCIStack/lhcivpc/PublicSubnet1
      VpcId:
        Ref: lhcivpc965AD59A
    Metadata:
      aws:cdk:path: LHCIStack/lhcivpc/PublicSubnet1/RouteTable
  lhcivpcPublicSubnet1RouteTableAssociation1E675278:
    Type: AWS::EC2::SubnetRouteTableAssociation
    Properties:
      RouteTableId:
        Ref: lhcivpcPublicSubnet1RouteTable126FE11B
      SubnetId:
        Ref: lhcivpcPublicSubnet1SubnetCE46A6BB
    Metadata:
      aws:cdk:path: LHCIStack/lhcivpc/PublicSubnet1/RouteTableAssociation
  lhcivpcPublicSubnet1DefaultRoute48B9DD65:
    Type: AWS::EC2::Route
    Properties:
      DestinationCidrBlock: 0.0.0.0/0
      GatewayId:
        Ref: lhcivpcIGWF1783B79
      RouteTableId:
        Ref: lhcivpcPublicSubnet1RouteTable126FE11B
    DependsOn:
      - lhcivpcVPCGWE3A1DE80
    Metadata:
      aws:cdk:path: LHCIStack/lhcivpc/PublicSubnet1/DefaultRoute
  lhcivpcPublicSubnet1EIP54E93ABF:
    Type: AWS::EC2::EIP
    Properties:
      Domain: vpc
      Tags:
        - Key: Name
          Value: LHCIStack/lhcivpc/PublicSubnet1
    Metadata:
      aws:cdk:path: LHCIStack/lhcivpc/PublicSubnet1/EIP
  lhcivpcPublicSubnet1NATGateway427B2A8A:
    Type: AWS::EC2::NatGateway
    Properties:
      AllocationId:
        Fn::GetAtt:
          - lhcivpcPublicSubnet1EIP54E93ABF
          - AllocationId
      SubnetId:
        Ref: lhcivpcPublicSubnet1SubnetCE46A6BB
      Tags:
        - Key: Name
          Value: LHCIStack/lhcivpc/PublicSubnet1
    DependsOn:
      - lhcivpcPublicSubnet1DefaultRoute48B9DD65
      - lhcivpcPublicSubnet1RouteTableAssociation1E675278
    Metadata:
      aws:cdk:path: LHCIStack/lhcivpc/PublicSubnet1/NATGateway
  lhcivpcPublicSubnet2SubnetD56D670B:
    Type: AWS::EC2::Subnet
    Properties:
      AvailabilityZone: us-east-1b
      CidrBlock: 172.16.16.64/26
      MapPublicIpOnLaunch: true
      Tags:
        - Key: aws-cdk:subnet-name
          Value: Public
        - Key: aws-cdk:subnet-type
          Value: Public
        - Key: Name
          Value: LHCIStack/lhcivpc/PublicSubnet2
      VpcId:
        Ref: lhcivpc965AD59A
    Metadata:
      aws:cdk:path: LHCIStack/lhcivpc/PublicSubnet2/Subnet
  lhcivpcPublicSubnet2RouteTable806978C3:
    Type: AWS::EC2::RouteTable
    Properties:
      Tags:
        - Key: Name
          Value: LHCIStack/lhcivpc/PublicSubnet2
      VpcId:
        Ref: lhcivpc965AD59A
    Metadata:
      aws:cdk:path: LHCIStack/lhcivpc/PublicSubnet2/RouteTable
  lhcivpcPublicSubnet2RouteTableAssociation407A54C8:
    Type: AWS::EC2::SubnetRouteTableAssociation
    Properties:
      RouteTableId:
        Ref: lhcivpcPublicSubnet2RouteTable806978C3
      SubnetId:
        Ref: lhcivpcPublicSubnet2SubnetD56D670B
    Metadata:
      aws:cdk:path: LHCIStack/lhcivpc/PublicSubnet2/RouteTableAssociation
  lhcivpcPublicSubnet2DefaultRoute2802DD50:
    Type: AWS::EC2::Route
    Properties:
      DestinationCidrBlock: 0.0.0.0/0
      GatewayId:
        Ref: lhcivpcIGWF1783B79
      RouteTableId:
        Ref: lhcivpcPublicSubnet2RouteTable806978C3
    DependsOn:
      - lhcivpcVPCGWE3A1DE80
    Metadata:
      aws:cdk:path: LHCIStack/lhcivpc/PublicSubnet2/DefaultRoute
  lhcivpcPublicSubnet2EIP5722D27A:
    Type: AWS::EC2::EIP
    Properties:
      Domain: vpc
      Tags:
        - Key: Name
          Value: LHCIStack/lhcivpc/PublicSubnet2
    Metadata:
      aws:cdk:path: LHCIStack/lhcivpc/PublicSubnet2/EIP
  lhcivpcPublicSubnet2NATGatewayDACD808D:
    Type: AWS::EC2::NatGateway
    Properties:
      AllocationId:
        Fn::GetAtt:
          - lhcivpcPublicSubnet2EIP5722D27A
          - AllocationId
      SubnetId:
        Ref: lhcivpcPublicSubnet2SubnetD56D670B
      Tags:
        - Key: Name
          Value: LHCIStack/lhcivpc/PublicSubnet2
    DependsOn:
      - lhcivpcPublicSubnet2DefaultRoute2802DD50
      - lhcivpcPublicSubnet2RouteTableAssociation407A54C8
    Metadata:
      aws:cdk:path: LHCIStack/lhcivpc/PublicSubnet2/NATGateway
  lhcivpcPublicSubnet3SubnetF8682D4B:
    Type: AWS::EC2::Subnet
    Properties:
      AvailabilityZone: us-east-1c
      CidrBlock: 172.16.16.128/26
      MapPublicIpOnLaunch: true
      Tags:
        - Key: aws-cdk:subnet-name
          Value: Public
        - Key: aws-cdk:subnet-type
          Value: Public
        - Key: Name
          Value: LHCIStack/lhcivpc/PublicSubnet3
      VpcId:
        Ref: lhcivpc965AD59A
    Metadata:
      aws:cdk:path: LHCIStack/lhcivpc/PublicSubnet3/Subnet
  lhcivpcPublicSubnet3RouteTable17475A2E:
    Type: AWS::EC2::RouteTable
    Properties:
      Tags:
        - Key: Name
          Value: LHCIStack/lhcivpc/PublicSubnet3
      VpcId:
        Ref: lhcivpc965AD59A
    Metadata:
      aws:cdk:path: LHCIStack/lhcivpc/PublicSubnet3/RouteTable
  lhcivpcPublicSubnet3RouteTableAssociation428C569B:
    Type: AWS::EC2::SubnetRouteTableAssociation
    Properties:
      RouteTableId:
        Ref: lhcivpcPublicSubnet3RouteTable17475A2E
      SubnetId:
        Ref: lhcivpcPublicSubnet3SubnetF8682D4B
    Metadata:
      aws:cdk:path: LHCIStack/lhcivpc/PublicSubnet3/RouteTableAssociation
  lhcivpcPublicSubnet3DefaultRoute8EE078C3:
    Type: AWS::EC2::Route
    Properties:
      DestinationCidrBlock: 0.0.0.0/0
      GatewayId:
        Ref: lhcivpcIGWF1783B79
      RouteTableId:
        Ref: lhcivpcPublicSubnet3RouteTable17475A2E
    DependsOn:
      - lhcivpcVPCGWE3A1DE80
    Metadata:
      aws:cdk:path: LHCIStack/lhcivpc/PublicSubnet3/DefaultRoute
  lhcivpcPublicSubnet3EIP521DF8D9:
    Type: AWS::EC2::EIP
    Properties:
      Domain: vpc
      Tags:
        - Key: Name
          Value: LHCIStack/lhcivpc/PublicSubnet3
    Metadata:
      aws:cdk:path: LHCIStack/lhcivpc/PublicSubnet3/EIP
  lhcivpcPublicSubnet3NATGateway83995124:
    Type: AWS::EC2::NatGateway
    Properties:
      AllocationId:
        Fn::GetAtt:
          - lhcivpcPublicSubnet3EIP521DF8D9
          - AllocationId
      SubnetId:
        Ref: lhcivpcPublicSubnet3SubnetF8682D4B
      Tags:
        - Key: Name
          Value: LHCIStack/lhcivpc/PublicSubnet3
    DependsOn:
      - lhcivpcPublicSubnet3DefaultRoute8EE078C3
      - lhcivpcPublicSubnet3RouteTableAssociation428C569B
    Metadata:
      aws:cdk:path: LHCIStack/lhcivpc/PublicSubnet3/NATGateway
  lhcivpcPrivateSubnet1SubnetF25F04A9:
    Type: AWS::EC2::Subnet
    Properties:
      AvailabilityZone: us-east-1a
      CidrBlock: 172.16.16.192/26
      MapPublicIpOnLaunch: false
      Tags:
        - Key: aws-cdk:subnet-name
          Value: Private
        - Key: aws-cdk:subnet-type
          Value: Private
        - Key: Name
          Value: LHCIStack/lhcivpc/PrivateSubnet1
      VpcId:
        Ref: lhcivpc965AD59A
    Metadata:
      aws:cdk:path: LHCIStack/lhcivpc/PrivateSubnet1/Subnet
  lhcivpcPrivateSubnet1RouteTable1B2BFD24:
    Type: AWS::EC2::RouteTable
    Properties:
      Tags:
        - Key: Name
          Value: LHCIStack/lhcivpc/PrivateSubnet1
      VpcId:
        Ref: lhcivpc965AD59A
    Metadata:
      aws:cdk:path: LHCIStack/lhcivpc/PrivateSubnet1/RouteTable
  lhcivpcPrivateSubnet1RouteTableAssociationA67A3DBF:
    Type: AWS::EC2::SubnetRouteTableAssociation
    Properties:
      RouteTableId:
        Ref: lhcivpcPrivateSubnet1RouteTable1B2BFD24
      SubnetId:
        Ref: lhcivpcPrivateSubnet1SubnetF25F04A9
    Metadata:
      aws:cdk:path: LHCIStack/lhcivpc/PrivateSubnet1/RouteTableAssociation
  lhcivpcPrivateSubnet1DefaultRoute713B6F19:
    Type: AWS::EC2::Route
    Properties:
      DestinationCidrBlock: 0.0.0.0/0
      NatGatewayId:
        Ref: lhcivpcPublicSubnet1NATGateway427B2A8A
      RouteTableId:
        Ref: lhcivpcPrivateSubnet1RouteTable1B2BFD24
    Metadata:
      aws:cdk:path: LHCIStack/lhcivpc/PrivateSubnet1/DefaultRoute
  lhcivpcPrivateSubnet2Subnet83263B2C:
    Type: AWS::EC2::Subnet
    Properties:
      AvailabilityZone: us-east-1b
      CidrBlock: 172.16.17.0/26
      MapPublicIpOnLaunch: false
      Tags:
        - Key: aws-cdk:subnet-name
          Value: Private
        - Key: aws-cdk:subnet-type
          Value: Private
        - Key: Name
          Value: LHCIStack/lhcivpc/PrivateSubnet2
      VpcId:
        Ref: lhcivpc965AD59A
    Metadata:
      aws:cdk:path: LHCIStack/lhcivpc/PrivateSubnet2/Subnet
  lhcivpcPrivateSubnet2RouteTable49BA5E09:
    Type: AWS::EC2::RouteTable
    Properties:
      Tags:
        - Key: Name
          Value: LHCIStack/lhcivpc/PrivateSubnet2
      VpcId:
        Ref: lhcivpc965AD59A
    Metadata:
      aws:cdk:path: LHCIStack/lhcivpc/PrivateSubnet2/RouteTable
  lhcivpcPrivateSubnet2RouteTableAssociationFCFD5A96:
    Type: AWS::EC2::SubnetRouteTableAssociation
    Properties:
      RouteTableId:
        Ref: lhcivpcPrivateSubnet2RouteTable49BA5E09
      SubnetId:
        Ref: lhcivpcPrivateSubnet2Subnet83263B2C
    Metadata:
      aws:cdk:path: LHCIStack/lhcivpc/PrivateSubnet2/RouteTableAssociation
  lhcivpcPrivateSubnet2DefaultRouteF8967559:
    Type: AWS::EC2::Route
    Properties:
      DestinationCidrBlock: 0.0.0.0/0
      NatGatewayId:
        Ref: lhcivpcPublicSubnet2NATGatewayDACD808D
      RouteTableId:
        Ref: lhcivpcPrivateSubnet2RouteTable49BA5E09
    Metadata:
      aws:cdk:path: LHCIStack/lhcivpc/PrivateSubnet2/DefaultRoute
  lhcivpcPrivateSubnet3Subnet134BC163:
    Type: AWS::EC2::Subnet
    Properties:
      AvailabilityZone: us-east-1c
      CidrBlock: 172.16.17.64/26
      MapPublicIpOnLaunch: false
      Tags:
        - Key: aws-cdk:subnet-name
          Value: Private
        - Key: aws-cdk:subnet-type
          Value: Private
        - Key: Name
          Value: LHCIStack/lhcivpc/PrivateSubnet3
      VpcId:
        Ref: lhcivpc965AD59A
    Metadata:
      aws:cdk:path: LHCIStack/lhcivpc/PrivateSubnet3/Subnet
  lhcivpcPrivateSubnet3RouteTable3912B3D9:
    Type: AWS::EC2::RouteTable
    Properties:
      Tags:
        - Key: Name
          Value: LHCIStack/lhcivpc/PrivateSubnet3
      VpcId:
        Ref: lhcivpc965AD59A
    Metadata:
      aws:cdk:path: LHCIStack/lhcivpc/PrivateSubnet3/RouteTable
  lhcivpcPrivateSubnet3RouteTableAssociationC1C9D0B6:
    Type: AWS::EC2::SubnetRouteTableAssociation
    Properties:
      RouteTableId:
        Ref: lhcivpcPrivateSubnet3RouteTable3912B3D9
      SubnetId:
        Ref: lhcivpcPrivateSubnet3Subnet134BC163
    Metadata:
      aws:cdk:path: LHCIStack/lhcivpc/PrivateSubnet3/RouteTableAssociation
  lhcivpcPrivateSubnet3DefaultRoute045DA08D:
    Type: AWS::EC2::Route
    Properties:
      DestinationCidrBlock: 0.0.0.0/0
      NatGatewayId:
        Ref: lhcivpcPublicSubnet3NATGateway83995124
      RouteTableId:
        Ref: lhcivpcPrivateSubnet3RouteTable3912B3D9
    Metadata:
      aws:cdk:path: LHCIStack/lhcivpc/PrivateSubnet3/DefaultRoute
  lhcivpcIGWF1783B79:
    Type: AWS::EC2::InternetGateway
    Properties:
      Tags:
        - Key: Name
          Value: LHCIStack/lhcivpc
    Metadata:
      aws:cdk:path: LHCIStack/lhcivpc/IGW
  lhcivpcVPCGWE3A1DE80:
    Type: AWS::EC2::VPCGatewayAttachment
    Properties:
      InternetGatewayId:
        Ref: lhcivpcIGWF1783B79
      VpcId:
        Ref: lhcivpc965AD59A
    Metadata:
      aws:cdk:path: LHCIStack/lhcivpc/VPCGW
  LHCIECSClusterB6C96198:
    Type: AWS::ECS::Cluster
    Metadata:
      aws:cdk:path: LHCIStack/LHCIECSCluster/Resource
  LHCIEfsFileSystemCDE3789C:
    Type: AWS::EFS::FileSystem
    Properties:
      Encrypted: true
      FileSystemTags:
        - Key: Name
          Value: LHCIStack/LHCIEfsFileSystem
      LifecyclePolicies:
        - TransitionToIA: AFTER_14_DAYS
      PerformanceMode: generalPurpose
      ThroughputMode: bursting
    UpdateReplacePolicy: Delete
    DeletionPolicy: Delete
    Metadata:
      aws:cdk:path: LHCIStack/LHCIEfsFileSystem/Resource
  LHCIEfsFileSystemEfsSecurityGroup86969A31:
    Type: AWS::EC2::SecurityGroup
    Properties:
      GroupDescription: LHCIStack/LHCIEfsFileSystem/EfsSecurityGroup
      SecurityGroupEgress:
        - CidrIp: 0.0.0.0/0
          Description: Allow all outbound traffic by default
          IpProtocol: "-1"
      Tags:
        - Key: Name
          Value: LHCIStack/LHCIEfsFileSystem
      VpcId:
        Ref: lhcivpc965AD59A
    Metadata:
      aws:cdk:path: LHCIStack/LHCIEfsFileSystem/EfsSecurityGroup/Resource
  LHCIEfsFileSystemEfsSecurityGroupfromLHCIStackService01ServiceSecurityGroupC45511A520499A27ACA0:
    Type: AWS::EC2::SecurityGroupIngress
    Properties:
      Description: from LHCIStackService01ServiceSecurityGroupC45511A5:2049
      FromPort: 2049
      GroupId:
        Fn::GetAtt:
          - LHCIEfsFileSystemEfsSecurityGroup86969A31
          - GroupId
      IpProtocol: tcp
      SourceSecurityGroupId:
        Fn::GetAtt:
          - Service01ServiceSecurityGroup8E0F19CD
          - GroupId
      ToPort: 2049
    Metadata:
      aws:cdk:path: LHCIStack/LHCIEfsFileSystem/EfsSecurityGroup/from LHCIStackService01ServiceSecurityGroupC45511A5:2049
  LHCIEfsFileSystemEfsMountTarget1CD5F34AE:
    Type: AWS::EFS::MountTarget
    Properties:
      FileSystemId:
        Ref: LHCIEfsFileSystemCDE3789C
      SecurityGroups:
        - Fn::GetAtt:
            - LHCIEfsFileSystemEfsSecurityGroup86969A31
            - GroupId
      SubnetId:
        Ref: lhcivpcPrivateSubnet1SubnetF25F04A9
    Metadata:
      aws:cdk:path: LHCIStack/LHCIEfsFileSystem/EfsMountTarget1
  LHCIEfsFileSystemEfsMountTarget2BCD2FD03:
    Type: AWS::EFS::MountTarget
    Properties:
      FileSystemId:
        Ref: LHCIEfsFileSystemCDE3789C
      SecurityGroups:
        - Fn::GetAtt:
            - LHCIEfsFileSystemEfsSecurityGroup86969A31
            - GroupId
      SubnetId:
        Ref: lhcivpcPrivateSubnet2Subnet83263B2C
    Metadata:
      aws:cdk:path: LHCIStack/LHCIEfsFileSystem/EfsMountTarget2
  LHCIEfsFileSystemEfsMountTarget3F72CC698:
    Type: AWS::EFS::MountTarget
    Properties:
      FileSystemId:
        Ref: LHCIEfsFileSystemCDE3789C
      SecurityGroups:
        - Fn::GetAtt:
            - LHCIEfsFileSystemEfsSecurityGroup86969A31
            - GroupId
      SubnetId:
        Ref: lhcivpcPrivateSubnet3Subnet134BC163
    Metadata:
      aws:cdk:path: LHCIStack/LHCIEfsFileSystem/EfsMountTarget3
  AccessPointE936DE82:
    Type: AWS::EFS::AccessPoint
    Properties:
      AccessPointTags:
        - Key: Name
          Value: LHCIStack/AccessPoint
      FileSystemId:
        Ref: LHCIEfsFileSystemCDE3789C
      RootDirectory: {}
    Metadata:
      aws:cdk:path: LHCIStack/AccessPoint/Resource
  LHCITaskDefTaskRole652AB3B9:
    Type: AWS::IAM::Role
    Properties:
      AssumeRolePolicyDocument:
        Statement:
          - Action: sts:AssumeRole
            Effect: Allow
            Principal:
              Service: ecs-tasks.amazonaws.com
        Version: "2012-10-17"
    Metadata:
      aws:cdk:path: LHCIStack/LHCITaskDef/TaskRole/Resource
  LHCITaskDefTaskRoleDefaultPolicy0C7A0BBA:
    Type: AWS::IAM::Policy
    Properties:
      PolicyDocument:
        Statement:
          - Action:
              - elasticfilesystem:ClientRootAccess
              - elasticfilesystem:ClientWrite
              - elasticfilesystem:ClientMount
              - elasticfilesystem:DescribeMountTargets
            Effect: Allow
            Resource:
              Fn::Join:
                - ""
                - - arn:aws:elasticfilesystem:us-east-1:550767824695:file-system/
                  - Ref: LHCIEfsFileSystemCDE3789C
          - Action: ec2:DescribeAvailabilityZones
            Effect: Allow
            Resource: "*"
        Version: "2012-10-17"
      PolicyName: LHCITaskDefTaskRoleDefaultPolicy0C7A0BBA
      Roles:
        - Ref: LHCITaskDefTaskRole652AB3B9
    Metadata:
      aws:cdk:path: LHCIStack/LHCITaskDef/TaskRole/DefaultPolicy/Resource
  LHCITaskDefF4F68050:
    Type: AWS::ECS::TaskDefinition
    Properties:
      ContainerDefinitions:
        - Essential: true
          Image: patrickhulce/lhci-server:latest
          MountPoints:
            - ContainerPath: /data
              ReadOnly: false
              SourceVolume: efs-volume
          Name: LHCIContainerDef
          PortMappings:
            - ContainerPort: 9001
              Protocol: tcp
      Cpu: "512"
      Family: LHCIStackLHCITaskDefD7CCE1C3
      Memory: "1024"
      NetworkMode: awsvpc
      RequiresCompatibilities:
        - FARGATE
      TaskRoleArn:
        Fn::GetAtt:
          - LHCITaskDefTaskRole652AB3B9
          - Arn
      Volumes:
        - EFSVolumeConfiguration:
            AuthorizationConfig:
              AccessPointId:
                Ref: AccessPointE936DE82
              IAM: ENABLED
            FilesystemId:
              Ref: LHCIEfsFileSystemCDE3789C
            TransitEncryption: ENABLED
          Name: efs-volume
    Metadata:
      aws:cdk:path: LHCIStack/LHCITaskDef/Resource
  certificateEC031123:
    Type: AWS::CertificateManager::Certificate
    Properties:
      DomainName: lhci.troydieter.com
      DomainValidationOptions:
        - DomainName: lhci.troydieter.com
          HostedZoneId: Z10057183MLGVY8QQ2VGK
      Tags:
        - Key: Name
          Value: LHCIStack/certificate
      ValidationMethod: DNS
    Metadata:
      aws:cdk:path: LHCIStack/certificate/Resource
  Service01LB5B16E367:
    Type: AWS::ElasticLoadBalancingV2::LoadBalancer
    Properties:
      LoadBalancerAttributes:
        - Key: deletion_protection.enabled
          Value: "false"
      Scheme: internet-facing
      SecurityGroups:
        - Fn::GetAtt:
            - Service01LBSecurityGroup9E9E5EDB
            - GroupId
      Subnets:
        - Ref: lhcivpcPublicSubnet1SubnetCE46A6BB
        - Ref: lhcivpcPublicSubnet2SubnetD56D670B
        - Ref: lhcivpcPublicSubnet3SubnetF8682D4B
      Type: application
    DependsOn:
      - lhcivpcPublicSubnet1DefaultRoute48B9DD65
      - lhcivpcPublicSubnet1RouteTableAssociation1E675278
      - lhcivpcPublicSubnet2DefaultRoute2802DD50
      - lhcivpcPublicSubnet2RouteTableAssociation407A54C8
      - lhcivpcPublicSubnet3DefaultRoute8EE078C3
      - lhcivpcPublicSubnet3RouteTableAssociation428C569B
    Metadata:
      aws:cdk:path: LHCIStack/Service01/LB/Resource
  Service01LBSecurityGroup9E9E5EDB:
    Type: AWS::EC2::SecurityGroup
    Properties:
      GroupDescription: Automatically created Security Group for ELB LHCIStackService01LBDBE5C761
      SecurityGroupIngress:
        - CidrIp: 0.0.0.0/0
          Description: Allow from anyone on port 443
          FromPort: 443
          IpProtocol: tcp
          ToPort: 443
        - CidrIp: 0.0.0.0/0
          Description: Allow from anyone on port 80
          FromPort: 80
          IpProtocol: tcp
          ToPort: 80
      VpcId:
        Ref: lhcivpc965AD59A
    Metadata:
      aws:cdk:path: LHCIStack/Service01/LB/SecurityGroup/Resource
  Service01LBSecurityGrouptoLHCIStackService01ServiceSecurityGroupC45511A5900109DF23A5:
    Type: AWS::EC2::SecurityGroupEgress
    Properties:
      Description: Load balancer to target
      DestinationSecurityGroupId:
        Fn::GetAtt:
          - Service01ServiceSecurityGroup8E0F19CD
          - GroupId
      FromPort: 9001
      GroupId:
        Fn::GetAtt:
          - Service01LBSecurityGroup9E9E5EDB
          - GroupId
      IpProtocol: tcp
      ToPort: 9001
    Metadata:
      aws:cdk:path: LHCIStack/Service01/LB/SecurityGroup/to LHCIStackService01ServiceSecurityGroupC45511A5:9001
  Service01LBPublicListenerE149F2AA:
    Type: AWS::ElasticLoadBalancingV2::Listener
    Properties:
      Certificates:
        - CertificateArn:
            Ref: certificateEC031123
      DefaultActions:
        - TargetGroupArn:
            Ref: Service01LBPublicListenerECSGroupC15AA389
          Type: forward
      LoadBalancerArn:
        Ref: Service01LB5B16E367
      Port: 443
      Protocol: HTTPS
    Metadata:
      aws:cdk:path: LHCIStack/Service01/LB/PublicListener/Resource
  Service01LBPublicListenerECSGroupC15AA389:
    Type: AWS::ElasticLoadBalancingV2::TargetGroup
    Properties:
      Matcher:
        HttpCode: "302"
      Port: 80
      Protocol: HTTP
      TargetGroupAttributes:
        - Key: stickiness.enabled
          Value: "false"
        - Key: deregistration_delay.timeout_seconds
          Value: "30"
      TargetType: ip
      VpcId:
        Ref: lhcivpc965AD59A
    Metadata:
      aws:cdk:path: LHCIStack/Service01/LB/PublicListener/ECSGroup/Resource
  Service01LBPublicRedirectListener36AC18E7:
    Type: AWS::ElasticLoadBalancingV2::Listener
    Properties:
      DefaultActions:
        - RedirectConfig:
            Port: "443"
            Protocol: HTTPS
            StatusCode: HTTP_301
          Type: redirect
      LoadBalancerArn:
        Ref: Service01LB5B16E367
      Port: 80
      Protocol: HTTP
    DependsOn:
      - Service01LBPublicListenerECSGroupC15AA389
      - Service01LBPublicListenerE149F2AA
    Metadata:
      aws:cdk:path: LHCIStack/Service01/LB/PublicRedirectListener/Resource
  Service01DNS8C2E8470:
    Type: AWS::Route53::RecordSet
    Properties:
      AliasTarget:
        DNSName:
          Fn::Join:
            - ""
            - - dualstack.
              - Fn::GetAtt:
                  - Service01LB5B16E367
                  - DNSName
        HostedZoneId:
          Fn::GetAtt:
            - Service01LB5B16E367
            - CanonicalHostedZoneID
      HostedZoneId: Z10057183MLGVY8QQ2VGK
      Name: lhci.troydieter.com.
      Type: A
    Metadata:
      aws:cdk:path: LHCIStack/Service01/DNS/Resource
  Service01Service20C10D3C:
    Type: AWS::ECS::Service
    Properties:
      Cluster:
        Ref: LHCIECSClusterB6C96198
      DeploymentConfiguration:
        Alarms:
          AlarmNames: []
          Enable: false
          Rollback: false
        MaximumPercent: 200
        MinimumHealthyPercent: 50
      DesiredCount: 2
      EnableECSManagedTags: false
      HealthCheckGracePeriodSeconds: 60
      LaunchType: FARGATE
      LoadBalancers:
        - ContainerName: LHCIContainerDef
          ContainerPort: 9001
          TargetGroupArn:
            Ref: Service01LBPublicListenerECSGroupC15AA389
      NetworkConfiguration:
        AwsvpcConfiguration:
          AssignPublicIp: DISABLED
          SecurityGroups:
            - Fn::GetAtt:
                - Service01ServiceSecurityGroup8E0F19CD
                - GroupId
          Subnets:
            - Ref: lhcivpcPrivateSubnet1SubnetF25F04A9
            - Ref: lhcivpcPrivateSubnet2Subnet83263B2C
            - Ref: lhcivpcPrivateSubnet3Subnet134BC163
      PlatformVersion: 1.4.0
      TaskDefinition:
        Ref: LHCITaskDefF4F68050
    DependsOn:
      - LHCITaskDefTaskRoleDefaultPolicy0C7A0BBA
      - LHCITaskDefTaskRole652AB3B9
      - Service01LBPublicListenerECSGroupC15AA389
      - Service01LBPublicListenerE149F2AA
    Metadata:
      aws:cdk:path: LHCIStack/Service01/Service/Service
  Service01ServiceSecurityGroup8E0F19CD:
    Type: AWS::EC2::SecurityGroup
    Properties:
      GroupDescription: LHCIStack/Service01/Service/SecurityGroup
      SecurityGroupEgress:
        - CidrIp: 0.0.0.0/0
          Description: Allow all outbound traffic by default
          IpProtocol: "-1"
      VpcId:
        Ref: lhcivpc965AD59A
    DependsOn:
      - LHCITaskDefTaskRoleDefaultPolicy0C7A0BBA
      - LHCITaskDefTaskRole652AB3B9
    Metadata:
      aws:cdk:path: LHCIStack/Service01/Service/SecurityGroup/Resource
  Service01ServiceSecurityGroupfromLHCIStackService01LBSecurityGroup0AFDCD2490016BFE09C6:
    Type: AWS::EC2::SecurityGroupIngress
    Properties:
      Description: Load balancer to target
      FromPort: 9001
      GroupId:
        Fn::GetAtt:
          - Service01ServiceSecurityGroup8E0F19CD
          - GroupId
      IpProtocol: tcp
      SourceSecurityGroupId:
        Fn::GetAtt:
          - Service01LBSecurityGroup9E9E5EDB
          - GroupId
      ToPort: 9001
    DependsOn:
      - LHCITaskDefTaskRoleDefaultPolicy0C7A0BBA
      - LHCITaskDefTaskRole652AB3B9
    Metadata:
      aws:cdk:path: LHCIStack/Service01/Service/SecurityGroup/from LHCIStackService01LBSecurityGroup0AFDCD24:9001
  Service01ServiceTaskCountTarget962C5078:
    Type: AWS::ApplicationAutoScaling::ScalableTarget
    Properties:
      MaxCapacity: 4
      MinCapacity: 2
      ResourceId:
        Fn::Join:
          - ""
          - - service/
            - Ref: LHCIECSClusterB6C96198
            - /
            - Fn::GetAtt:
                - Service01Service20C10D3C
                - Name
      RoleARN:
        Fn::Join:
          - ""
          - - "arn:"
            - Ref: AWS::Partition
            - :iam::550767824695:role/aws-service-role/ecs.application-autoscaling.amazonaws.com/AWSServiceRoleForApplicationAutoScaling_ECSService
      ScalableDimension: ecs:service:DesiredCount
      ServiceNamespace: ecs
    DependsOn:
      - LHCITaskDefTaskRoleDefaultPolicy0C7A0BBA
      - LHCITaskDefTaskRole652AB3B9
    Metadata:
      aws:cdk:path: LHCIStack/Service01/Service/TaskCount/Target/Resource
  Service01ServiceTaskCountTargetCpuScaling58796C85:
    Type: AWS::ApplicationAutoScaling::ScalingPolicy
    Properties:
      PolicyName: LHCIStackService01ServiceTaskCountTargetCpuScaling80E3DC50
      PolicyType: TargetTrackingScaling
      ScalingTargetId:
        Ref: Service01ServiceTaskCountTarget962C5078
      TargetTrackingScalingPolicyConfiguration:
        PredefinedMetricSpecification:
          PredefinedMetricType: ECSServiceAverageCPUUtilization
        TargetValue: 75
    DependsOn:
      - LHCITaskDefTaskRoleDefaultPolicy0C7A0BBA
      - LHCITaskDefTaskRole652AB3B9
    Metadata:
      aws:cdk:path: LHCIStack/Service01/Service/TaskCount/Target/CpuScaling/Resource
  webacl:
    Type: AWS::WAFv2::WebACL
    Properties:
      DefaultAction:
        Allow: {}
      Rules:
        - Name: AWS-AWSManagedRulesCommonRuleSet
          OverrideAction:
            None: {}
          Priority: 1
          Statement:
            ManagedRuleGroupStatement:
              ExcludedRules:
                - Name: CrossSiteScripting_BODY
                - Name: NoUserAgent_HEADER
                - Name: SizeRestrictions_BODY
                - Name: UserAgent_BadBots_HEADER
              Name: AWSManagedRulesCommonRuleSet
              VendorName: AWS
          VisibilityConfig:
            CloudWatchMetricsEnabled: true
            MetricName: awsCommonRules
            SampledRequestsEnabled: true
      Scope: REGIONAL
      VisibilityConfig:
        CloudWatchMetricsEnabled: true
        MetricName: webACL
        SampledRequestsEnabled: true
    Metadata:
      aws:cdk:path: LHCIStack/web-acl
  webaclassociation:
    Type: AWS::WAFv2::WebACLAssociation
    Properties:
      ResourceArn:
        Ref: Service01LB5B16E367
      WebACLArn:
        Fn::GetAtt:
          - webacl
          - Arn
    Metadata:
      aws:cdk:path: LHCIStack/web-acl-association
  watchfulAlarmTopic1DB3DF22:
    Type: AWS::SNS::Topic
    Properties:
      DisplayName: Watchful Alarms
    Metadata:
      aws:cdk:path: LHCIStack/watchful/AlarmTopic/Resource
  watchfulAlarmTopictroydietergmailcom45D728F8:
    Type: AWS::SNS::Subscription
    Properties:
      Endpoint: troydieter@gmail.com
      Protocol: email
      TopicArn:
        Ref: watchfulAlarmTopic1DB3DF22
    Metadata:
      aws:cdk:path: LHCIStack/watchful/AlarmTopic/troydieter@gmail.com/Resource
  watchfulDashboard6A2D7A94:
    Type: AWS::CloudWatch::Dashboard
    Properties:
      DashboardBody:
        Fn::Join:
          - ""
          - - '{"widgets":[{"type":"text","width":24,"height":2,"x":0,"y":0,"properties":{"markdown":"# LHCIStack/Service01\n\n[button:ECS Service](https://console.aws.amazon.com/ecs/home?region=us-east-1#/clusters/'
            - Ref: LHCIECSClusterB6C96198
            - /services/
            - Fn::GetAtt:
                - Service01Service20C10D3C
                - Name
            - /details)"}},{"type":"metric","width":12,"height":6,"x":0,"y":2,"properties":{"view":"timeSeries","title":"CPUUtilization/5min","region":"
            - Ref: AWS::Region
            - '","metrics":[["AWS/ECS","CPUUtilization","ClusterName","'
            - Ref: LHCIECSClusterB6C96198
            - '","ServiceName","'
            - Fn::GetAtt:
                - Service01Service20C10D3C
                - Name
            - '"]],"annotations":{"horizontal":[{"label":"CPUUtilization > 0 for 3 datapoints within 15 minutes","value":0,"yAxis":"left"}]},"yAxis":{}}},{"type":"metric","width":12,"height":6,"x":12,"y":2,"properties":{"view":"timeSeries","title":"MemoryUtilization/5min","region":"'
            - Ref: AWS::Region
            - '","metrics":[["AWS/ECS","MemoryUtilization","ClusterName","'
            - Ref: LHCIECSClusterB6C96198
            - '","ServiceName","'
            - Fn::GetAtt:
                - Service01Service20C10D3C
                - Name
            - '"]],"annotations":{"horizontal":[{"label":"MemoryUtilization > 0 for 3 datapoints within 15 minutes","value":0,"yAxis":"left"}]},"yAxis":{}}},{"type":"metric","width":6,"height":6,"x":0,"y":8,"properties":{"view":"singleValue","title":"Healthy Hosts","region":"'
            - Ref: AWS::Region
            - '","metrics":[["AWS/ApplicationELB","HealthyHostCount","LoadBalancer","'
            - Fn::Select:
                - 1
                - Fn::Split:
                    - /
                    - Ref: Service01LBPublicListenerE149F2AA
            - /
            - Fn::Select:
                - 2
                - Fn::Split:
                    - /
                    - Ref: Service01LBPublicListenerE149F2AA
            - /
            - Fn::Select:
                - 3
                - Fn::Split:
                    - /
                    - Ref: Service01LBPublicListenerE149F2AA
            - '","TargetGroup","'
            - Fn::GetAtt:
                - Service01LBPublicListenerECSGroupC15AA389
                - TargetGroupFullName
            - '",{"stat":"Minimum"}]]}},{"type":"metric","width":6,"height":6,"x":6,"y":8,"properties":{"view":"singleValue","title":"UnHealthy Hosts","region":"'
            - Ref: AWS::Region
            - '","metrics":[["AWS/ApplicationELB","UnHealthyHostCount","LoadBalancer","'
            - Fn::Select:
                - 1
                - Fn::Split:
                    - /
                    - Ref: Service01LBPublicListenerE149F2AA
            - /
            - Fn::Select:
                - 2
                - Fn::Split:
                    - /
                    - Ref: Service01LBPublicListenerE149F2AA
            - /
            - Fn::Select:
                - 3
                - Fn::Split:
                    - /
                    - Ref: Service01LBPublicListenerE149F2AA
            - '","TargetGroup","'
            - Fn::GetAtt:
                - Service01LBPublicListenerECSGroupC15AA389
                - TargetGroupFullName
            - '",{"stat":"Maximum"}]]}},{"type":"metric","width":6,"height":6,"x":12,"y":8,"properties":{"view":"timeSeries","title":"TargetResponseTime/5min","region":"'
            - Ref: AWS::Region
            - '","metrics":[["AWS/ApplicationELB","TargetResponseTime","LoadBalancer","'
            - Fn::Select:
                - 1
                - Fn::Split:
                    - /
                    - Ref: Service01LBPublicListenerE149F2AA
            - /
            - Fn::Select:
                - 2
                - Fn::Split:
                    - /
                    - Ref: Service01LBPublicListenerE149F2AA
            - /
            - Fn::Select:
                - 3
                - Fn::Split:
                    - /
                    - Ref: Service01LBPublicListenerE149F2AA
            - '","TargetGroup","'
            - Fn::GetAtt:
                - Service01LBPublicListenerECSGroupC15AA389
                - TargetGroupFullName
            - '"]],"annotations":{"horizontal":[{"label":"TargetResponseTime > 0 for 3 datapoints within 15 minutes","value":0,"yAxis":"left"}]},"yAxis":{}}},{"type":"metric","width":6,"height":6,"x":18,"y":8,"properties":{"view":"timeSeries","title":"Requests/5min","region":"'
            - Ref: AWS::Region
            - '","metrics":[["AWS/ApplicationELB","RequestCount","LoadBalancer","'
            - Fn::Select:
                - 1
                - Fn::Split:
                    - /
                    - Ref: Service01LBPublicListenerE149F2AA
            - /
            - Fn::Select:
                - 2
                - Fn::Split:
                    - /
                    - Ref: Service01LBPublicListenerE149F2AA
            - /
            - Fn::Select:
                - 3
                - Fn::Split:
                    - /
                    - Ref: Service01LBPublicListenerE149F2AA
            - '","TargetGroup","'
            - Fn::GetAtt:
                - Service01LBPublicListenerECSGroupC15AA389
                - TargetGroupFullName
            - '",{"stat":"Sum"}]],"annotations":{"horizontal":[{"label":"RequestCount > 0 for 3 datapoints within 15 minutes","value":0,"yAxis":"left"}]},"yAxis":{}}},{"type":"metric","width":12,"height":6,"x":0,"y":14,"properties":{"view":"timeSeries","title":"HTTP Requests Overview","region":"'
            - Ref: AWS::Region
            - '","metrics":[["AWS/ApplicationELB","HTTPCode_Target_2XX_Count","LoadBalancer","'
            - Fn::Select:
                - 1
                - Fn::Split:
                    - /
                    - Ref: Service01LBPublicListenerE149F2AA
            - /
            - Fn::Select:
                - 2
                - Fn::Split:
                    - /
                    - Ref: Service01LBPublicListenerE149F2AA
            - /
            - Fn::Select:
                - 3
                - Fn::Split:
                    - /
                    - Ref: Service01LBPublicListenerE149F2AA
            - '","TargetGroup","'
            - Fn::GetAtt:
                - Service01LBPublicListenerECSGroupC15AA389
                - TargetGroupFullName
            - '",{"stat":"Sum"}],["AWS/ApplicationELB","HTTPCode_Target_3XX_Count","LoadBalancer","'
            - Fn::Select:
                - 1
                - Fn::Split:
                    - /
                    - Ref: Service01LBPublicListenerE149F2AA
            - /
            - Fn::Select:
                - 2
                - Fn::Split:
                    - /
                    - Ref: Service01LBPublicListenerE149F2AA
            - /
            - Fn::Select:
                - 3
                - Fn::Split:
                    - /
                    - Ref: Service01LBPublicListenerE149F2AA
            - '","TargetGroup","'
            - Fn::GetAtt:
                - Service01LBPublicListenerECSGroupC15AA389
                - TargetGroupFullName
            - '",{"stat":"Sum"}],["AWS/ApplicationELB","HTTPCode_Target_4XX_Count","LoadBalancer","'
            - Fn::Select:
                - 1
                - Fn::Split:
                    - /
                    - Ref: Service01LBPublicListenerE149F2AA
            - /
            - Fn::Select:
                - 2
                - Fn::Split:
                    - /
                    - Ref: Service01LBPublicListenerE149F2AA
            - /
            - Fn::Select:
                - 3
                - Fn::Split:
                    - /
                    - Ref: Service01LBPublicListenerE149F2AA
            - '","TargetGroup","'
            - Fn::GetAtt:
                - Service01LBPublicListenerECSGroupC15AA389
                - TargetGroupFullName
            - '",{"stat":"Sum"}],["AWS/ApplicationELB","HTTPCode_Target_5XX_Count","LoadBalancer","'
            - Fn::Select:
                - 1
                - Fn::Split:
                    - /
                    - Ref: Service01LBPublicListenerE149F2AA
            - /
            - Fn::Select:
                - 2
                - Fn::Split:
                    - /
                    - Ref: Service01LBPublicListenerE149F2AA
            - /
            - Fn::Select:
                - 3
                - Fn::Split:
                    - /
                    - Ref: Service01LBPublicListenerE149F2AA
            - '","TargetGroup","'
            - Fn::GetAtt:
                - Service01LBPublicListenerECSGroupC15AA389
                - TargetGroupFullName
            - '",{"stat":"Sum"}]],"yAxis":{}}},{"type":"metric","width":12,"height":6,"x":12,"y":14,"properties":{"view":"timeSeries","title":"HTTP Requests Error rate/5min","region":"'
            - Ref: AWS::Region
            - '","metrics":[[{"label":"http4xx + http5xx / requests","expression":"http4xx + http5xx / requests"}],["AWS/ApplicationELB","HTTPCode_Target_4XX_Count","LoadBalancer","'
            - Fn::Select:
                - 1
                - Fn::Split:
                    - /
                    - Ref: Service01LBPublicListenerE149F2AA
            - /
            - Fn::Select:
                - 2
                - Fn::Split:
                    - /
                    - Ref: Service01LBPublicListenerE149F2AA
            - /
            - Fn::Select:
                - 3
                - Fn::Split:
                    - /
                    - Ref: Service01LBPublicListenerE149F2AA
            - '","TargetGroup","'
            - Fn::GetAtt:
                - Service01LBPublicListenerECSGroupC15AA389
                - TargetGroupFullName
            - '",{"id":"http4xx","visible":false,"stat":"Sum"}],["AWS/ApplicationELB","HTTPCode_Target_5XX_Count","LoadBalancer","'
            - Fn::Select:
                - 1
                - Fn::Split:
                    - /
                    - Ref: Service01LBPublicListenerE149F2AA
            - /
            - Fn::Select:
                - 2
                - Fn::Split:
                    - /
                    - Ref: Service01LBPublicListenerE149F2AA
            - /
            - Fn::Select:
                - 3
                - Fn::Split:
                    - /
                    - Ref: Service01LBPublicListenerE149F2AA
            - '","TargetGroup","'
            - Fn::GetAtt:
                - Service01LBPublicListenerECSGroupC15AA389
                - TargetGroupFullName
            - '",{"id":"http5xx","visible":false,"stat":"Sum"}],["AWS/ApplicationELB","RequestCount","LoadBalancer","'
            - Fn::Select:
                - 1
                - Fn::Split:
                    - /
                    - Ref: Service01LBPublicListenerE149F2AA
            - /
            - Fn::Select:
                - 2
                - Fn::Split:
                    - /
                    - Ref: Service01LBPublicListenerE149F2AA
            - /
            - Fn::Select:
                - 3
                - Fn::Split:
                    - /
                    - Ref: Service01LBPublicListenerE149F2AA
            - '","TargetGroup","'
            - Fn::GetAtt:
                - Service01LBPublicListenerECSGroupC15AA389
                - TargetGroupFullName
            - '",{"id":"requests","visible":false,"stat":"Sum"}]],"annotations":{"horizontal":[{"label":"http4xx + http5xx / requests > 0 for 3 datapoints within 15 minutes","value":0,"yAxis":"left"}]},"yAxis":{}}}]}'
    Metadata:
      aws:cdk:path: LHCIStack/watchful/Dashboard/Resource
  watchfulLHCIStackService01Service386153B4cpuUtilizationAlarm40CB6E18:
    Type: AWS::CloudWatch::Alarm
    Properties:
      AlarmActions:
        - Ref: watchfulAlarmTopic1DB3DF22
      AlarmDescription: cpuUtilizationAlarm
      ComparisonOperator: GreaterThanThreshold
      Dimensions:
        - Name: ClusterName
          Value:
            Ref: LHCIECSClusterB6C96198
        - Name: ServiceName
          Value:
            Fn::GetAtt:
              - Service01Service20C10D3C
              - Name
      EvaluationPeriods: 3
      MetricName: CPUUtilization
      Namespace: AWS/ECS
      Period: 300
      Statistic: Average
      Threshold: 0
    Metadata:
      aws:cdk:path: LHCIStack/watchful/LHCIStackService01Service386153B4/cpuUtilizationAlarm/Resource
  watchfulLHCIStackService01Service386153B4memoryUtilizationAlarm35EAFFD4:
    Type: AWS::CloudWatch::Alarm
    Properties:
      AlarmActions:
        - Ref: watchfulAlarmTopic1DB3DF22
      AlarmDescription: memoryUtilizationAlarm
      ComparisonOperator: GreaterThanThreshold
      Dimensions:
        - Name: ClusterName
          Value:
            Ref: LHCIECSClusterB6C96198
        - Name: ServiceName
          Value:
            Fn::GetAtt:
              - Service01Service20C10D3C
              - Name
      EvaluationPeriods: 3
      MetricName: MemoryUtilization
      Namespace: AWS/ECS
      Period: 300
      Statistic: Average
      Threshold: 0
    Metadata:
      aws:cdk:path: LHCIStack/watchful/LHCIStackService01Service386153B4/memoryUtilizationAlarm/Resource
  watchfulLHCIStackService01Service386153B4targetResponseTimeAlarmDA21C101:
    Type: AWS::CloudWatch::Alarm
    Properties:
      AlarmActions:
        - Ref: watchfulAlarmTopic1DB3DF22
      AlarmDescription: targetResponseTimeAlarm
      ComparisonOperator: GreaterThanThreshold
      Dimensions:
        - Name: LoadBalancer
          Value:
            Fn::Join:
              - ""
              - - Fn::Select:
                    - 1
                    - Fn::Split:
                        - /
                        - Ref: Service01LBPublicListenerE149F2AA
                - /
                - Fn::Select:
                    - 2
                    - Fn::Split:
                        - /
                        - Ref: Service01LBPublicListenerE149F2AA
                - /
                - Fn::Select:
                    - 3
                    - Fn::Split:
                        - /
                        - Ref: Service01LBPublicListenerE149F2AA
        - Name: TargetGroup
          Value:
            Fn::GetAtt:
              - Service01LBPublicListenerECSGroupC15AA389
              - TargetGroupFullName
      EvaluationPeriods: 3
      MetricName: TargetResponseTime
      Namespace: AWS/ApplicationELB
      Period: 300
      Statistic: Average
      Threshold: 0
    Metadata:
      aws:cdk:path: LHCIStack/watchful/LHCIStackService01Service386153B4/targetResponseTimeAlarm/Resource
  watchfulLHCIStackService01Service386153B4requestsAlarmF91E7AF5:
    Type: AWS::CloudWatch::Alarm
    Properties:
      AlarmActions:
        - Ref: watchfulAlarmTopic1DB3DF22
      AlarmDescription: requestsAlarm
      ComparisonOperator: GreaterThanThreshold
      Dimensions:
        - Name: LoadBalancer
          Value:
            Fn::Join:
              - ""
              - - Fn::Select:
                    - 1
                    - Fn::Split:
                        - /
                        - Ref: Service01LBPublicListenerE149F2AA
                - /
                - Fn::Select:
                    - 2
                    - Fn::Split:
                        - /
                        - Ref: Service01LBPublicListenerE149F2AA
                - /
                - Fn::Select:
                    - 3
                    - Fn::Split:
                        - /
                        - Ref: Service01LBPublicListenerE149F2AA
        - Name: TargetGroup
          Value:
            Fn::GetAtt:
              - Service01LBPublicListenerECSGroupC15AA389
              - TargetGroupFullName
      EvaluationPeriods: 3
      MetricName: RequestCount
      Namespace: AWS/ApplicationELB
      Period: 300
      Statistic: Sum
      Threshold: 0
    Metadata:
      aws:cdk:path: LHCIStack/watchful/LHCIStackService01Service386153B4/requestsAlarm/Resource
  watchfulLHCIStackService01Service386153B4requestsErrorRateAlarm548A0316:
    Type: AWS::CloudWatch::Alarm
    Properties:
      AlarmActions:
        - Ref: watchfulAlarmTopic1DB3DF22
      AlarmDescription: requestsErrorRateAlarm
      ComparisonOperator: GreaterThanThreshold
      EvaluationPeriods: 3
      Metrics:
        - Expression: http4xx + http5xx / requests
          Id: expr_1
          ReturnData: true
        - Id: http4xx
          MetricStat:
            Metric:
              Dimensions:
                - Name: LoadBalancer
                  Value:
                    Fn::Join:
                      - ""
                      - - Fn::Select:
                            - 1
                            - Fn::Split:
                                - /
                                - Ref: Service01LBPublicListenerE149F2AA
                        - /
                        - Fn::Select:
                            - 2
                            - Fn::Split:
                                - /
                                - Ref: Service01LBPublicListenerE149F2AA
                        - /
                        - Fn::Select:
                            - 3
                            - Fn::Split:
                                - /
                                - Ref: Service01LBPublicListenerE149F2AA
                - Name: TargetGroup
                  Value:
                    Fn::GetAtt:
                      - Service01LBPublicListenerECSGroupC15AA389
                      - TargetGroupFullName
              MetricName: HTTPCode_Target_4XX_Count
              Namespace: AWS/ApplicationELB
            Period: 300
            Stat: Sum
          ReturnData: false
        - Id: http5xx
          MetricStat:
            Metric:
              Dimensions:
                - Name: LoadBalancer
                  Value:
                    Fn::Join:
                      - ""
                      - - Fn::Select:
                            - 1
                            - Fn::Split:
                                - /
                                - Ref: Service01LBPublicListenerE149F2AA
                        - /
                        - Fn::Select:
                            - 2
                            - Fn::Split:
                                - /
                                - Ref: Service01LBPublicListenerE149F2AA
                        - /
                        - Fn::Select:
                            - 3
                            - Fn::Split:
                                - /
                                - Ref: Service01LBPublicListenerE149F2AA
                - Name: TargetGroup
                  Value:
                    Fn::GetAtt:
                      - Service01LBPublicListenerECSGroupC15AA389
                      - TargetGroupFullName
              MetricName: HTTPCode_Target_5XX_Count
              Namespace: AWS/ApplicationELB
            Period: 300
            Stat: Sum
          ReturnData: false
        - Id: requests
          MetricStat:
            Metric:
              Dimensions:
                - Name: LoadBalancer
                  Value:
                    Fn::Join:
                      - ""
                      - - Fn::Select:
                            - 1
                            - Fn::Split:
                                - /
                                - Ref: Service01LBPublicListenerE149F2AA
                        - /
                        - Fn::Select:
                            - 2
                            - Fn::Split:
                                - /
                                - Ref: Service01LBPublicListenerE149F2AA
                        - /
                        - Fn::Select:
                            - 3
                            - Fn::Split:
                                - /
                                - Ref: Service01LBPublicListenerE149F2AA
                - Name: TargetGroup
                  Value:
                    Fn::GetAtt:
                      - Service01LBPublicListenerECSGroupC15AA389
                      - TargetGroupFullName
              MetricName: RequestCount
              Namespace: AWS/ApplicationELB
            Period: 300
            Stat: Sum
          ReturnData: false
      Threshold: 0
    Metadata:
      aws:cdk:path: LHCIStack/watchful/LHCIStackService01Service386153B4/requestsErrorRateAlarm/Resource
  CDKMetadata:
    Type: AWS::CDK::Metadata
    Properties:
      Analytics: v2:deflate64:H4sIAAAAAAAA/31TXY/aMBD8Lfdu3BbUH5DmPoR0bSOCro+njbMJW4wd2WsQivLfKztAwrXq085MxpZ3drOUy9VKfn6Ak1+oer/QVMm+ZFB7ASf/3qNayv6tUyJvzFuRiyJUmlQZKoMctQltbGDcQqVx0ict894qAiZrbuYIntZFLD+AX4DxBGdRODoC43Tx2jA6gzfD+JILy5hB7Q5oWJSogiM+vzgbuvSG/wpr0zr0/i/9KcmDQOVln+vgGV00XeEzuBZiV37/iA0Zuvb0UbGGgQy6mXY5W6I7khpzusBSgY45xUtyGwwPAhsv+2fSWJ494yG679n36NuCa5FFphR6X1gyKbMZHQTBQfYbOw4m1cJqUinJEQ1CoWNqSAHjAQy06GSfT1oKYKIpnfcOOE7Gy6zrdNTJmlcL9TfQYBTWH7pFDZ5JaQt1lRxk2uNS9v8+nTK/43MfeUZz8Vzx7PsYym3uMzoIF1fv60r22QaVdXUKJaESeRAw3QKBrVegybSynwaU8o6ju1fGsnWg9mTacjw3BX0nDOIETew9b8wvrLL8VdzQ7E8ZhDde9lvbUfoBR1CGyitH3XXv5nwQSttQn4DVTvaP4HeVhbHHiWQaXFqgBIZBbNDb4MaF/Bm4CzyI4sw7az6t5JelXD389kQLFwzTAeVmrH8At8l+UzsEAAA=
    Metadata:
      aws:cdk:path: LHCIStack/CDKMetadata/Default
Outputs:
  Service01LoadBalancerDNS541E07D4:
    Value:
      Fn::GetAtt:
        - Service01LB5B16E367
        - DNSName
  Service01ServiceURLFF3EC1CD:
    Value:
      Fn::Join:
        - ""
        - - https://
          - Ref: Service01DNS8C2E8470
  watchfulWatchfulDashboardF732C7A5:
    Value:
      Fn::Join:
        - ""
        - - https://console.aws.amazon.com/cloudwatch/home?region=us-east-1#dashboards:name=
          - Ref: watchfulDashboard6A2D7A94
Parameters:
  BootstrapVersion:
    Type: AWS::SSM::Parameter::Value<String>
    Default: /cdk-bootstrap/hnb659fds/version
    Description: Version of the CDK Bootstrap resources in this environment, automatically retrieved from SSM Parameter Store. [cdk:skip]

71 feature flags are not configured. Run 'cdk flags --unstable=flags' to learn more.

NOTICES         (What's this? https://github.com/aws/aws-cdk/wiki/CLI-Notices)

34892	CDK CLI collects telemetry data on command usage starting at version 2.1100.0 (unless opted out)

	Overview: We do not collect customer content and we anonymize the
	          telemetry we do collect. See the attached issue for more
	          information on what data is collected, why, and how to
	          opt-out. Telemetry will NOT be collected for any CDK CLI
	          version prior to version 2.1100.0 - regardless of
	          opt-in/out. You can also view the telemetry we collect by
	          logging it to a local file, by adding
	          `--telemetry-file=my/local/file` to any `cdk` command.

	Affected versions: cli: ^2.1100.0

	More information at: https://github.com/aws/aws-cdk/issues/34892


If you dont want to see a notice anymore, use "cdk acknowledge <id>". For example, "cdk acknowledge 34892".
